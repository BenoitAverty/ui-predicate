(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1337:function(e,t,r){"use strict";var n,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,d=e[Symbol.iterator]();!(n=(a=d.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r(176),a=(n=i)&&n.__esModule?n:{default:n};function d(e){return a.default.component(e+"-argument",{methods:{_onChange:function(e){var t=e.target.value;this.$emit("change",t)}},props:{value:{type:null,required:!0}},template:'<div><input type="'+e+'" @change="_onChange" :value="value"></div>'})}e.exports={DEFAULT_CONFIG:{operators:[{operator_id:"is",label:"is",argumentType_id:"smallString"},{operator_id:"contains",label:"Contains",argumentType_id:"smallString"},{operator_id:"isLowerThan",label:"<",argumentType_id:"number"},{operator_id:"isEqualTo",label:"=",argumentType_id:"number"},{operator_id:"isHigherThan",label:">",argumentType_id:"number"},{operator_id:"is_date",label:"is",argumentType_id:"datepicker"},{operator_id:"isBetween_date",label:"is between",argumentType_id:"daterangepicker"},{operator_id:"isBrighterThan",label:"is brighter than",argumentType_id:"colorpicker"},{operator_id:"isDarkerThan",label:"is darker than",argumentType_id:"colorpicker"},{operator_id:"is_color",label:"is",argumentType_id:"colorpicker"}],types:[{type_id:"int",operator_ids:["isLowerThan","isEqualTo","isHigherThan"]},{type_id:"string",operator_ids:["is","contains"]},{type_id:"datetime",operator_ids:["is_date","isBetween_date"]},{type_id:"color",operator_ids:["isBrighterThan","isDarkerThan","is_color"]}],targets:[{target_id:"article.title",label:"Article title",type_id:"string"},{target_id:"article.videoCount",label:"Article video count",type_id:"int"},{target_id:"article.publishingAt",label:"Article publish date",type_id:"datetime"},{target_id:"article.color",label:"Article main color",type_id:"color"}],logicalTypes:[{logicalType_id:"any",label:"Any"},{logicalType_id:"all",label:"All"},{logicalType_id:"none",label:"None"}],argumentTypes:[{argumentType_id:"datepicker",component:d("date")},{argumentType_id:"colorpicker",component:d("color")},{argumentType_id:"daterangepicker",component:a.default.component("daterangepicker-argument",{props:{value:{type:null,required:!0}},data:function(){return this._fromValue(this.value)},methods:{_fromValue:function(e){var t=Array.isArray(e)?e:[],r=o(t,2);return{start:r[0],end:r[1]}},_toValue:function(){return[this.start,this.end]},_updated:function(){this.$emit("change",this._toValue())},_onStartChange:function(e){var t=e.target.value;this.start=t,this._updated()},_onEndChange:function(e){var t=e.target.value;this.end=t,this._updated()}},template:'<div style="display: flex;width: 260px;">\n          <input type="date" @change="_onStartChange" :value="start">\n          <span>and</span>\n          <input type="date" @change="_onEndChange" :value="end"></div>'})},{argumentType_id:"smallString",component:d("text")},{argumentType_id:"number",component:d("number")}]},DATASETS:{simple:{logicalType_id:"all",predicates:[{target_id:"article.videoCount",operator_id:"isHigherThan",argument:10}]},advanced:{logicalType_id:"all",predicates:[{target_id:"article.title",operator_id:"contains",argument:"paradise"},{target_id:"article.videoCount",operator_id:"isHigherThan",argument:2},{logicalType_id:"none",predicates:[{target_id:"article.publishingAt",operator_id:"isBetween_date",argument:["2017-10-05","2018-10-05"]},{target_id:"article.publishingAt",operator_id:"isBetween_date",argument:["2010-10-05","2011-10-05"]},{target_id:"article.color",operator_id:"is_color",argument:"#e20400"},{target_id:"article.color",operator_id:"isDarkerThan",argument:"#783d3e"}]}]}}}},1355:function(e,t,r){"use strict";(function(e){var t=r(735),n=r(143),o=c(r(1354)),i=c(r(1352)),a=r(1349),d=r(1347),s=r(1337);function c(e){return e&&e.__esModule?e:{default:e}}var u=r(140).withStorySource;(0,t.storiesOf)("ui-predicate",e).addDecorator(u("import { storiesOf } from '@storybook/vue';\n\nimport { action } from '@storybook/addon-actions';\nimport backgrounds from '@storybook/addon-backgrounds/vue';\nimport Centered from '@storybook/addon-centered';\nimport { withNotes } from '@storybook/addon-notes';\n\nimport {\n  /* array,\n  boolean,\n  button,\n  color,\n  date,\n  number,\n  text,*/\n  select,\n  withKnobs,\n} from '@storybook/addon-knobs/vue';\n\nimport { DEFAULT_CONFIG, DATASETS } from './__fixtures__';\n\nstoriesOf('ui-predicate', module)\n  .addDecorator(Centered)\n  .addDecorator(withKnobs)\n  .addDecorator(withNotes)\n  .addDecorator(\n    backgrounds([\n      {\n        name: 'gray',\n        value: 'whitesmoke',\n        default: true,\n      },\n      {\n        name: 'twitter',\n        value: '#00aced',\n      },\n      {\n        name: 'facebook',\n        value: '#3b5998',\n      },\n    ])\n  )\n  .add(\n    'minimal configuration',\n    () => {\n      return {\n        template: '<ui-predicate :config=\"config\"></ui-predicate>',\n        data() {\n          return { config: DEFAULT_CONFIG };\n        },\n      };\n    },\n    {\n      notes: {\n        markdown: `\n      ## minimal configuration\n\n      \\`<ui-predicate/>\\` only requires a \\`config\\` object.\n      That's how you will pass your \\`targets\\`,\\`operators\\` , \\`types\\` and \\`logicalTypes\\`.\n\n    `,\n      },\n    }\n  )\n  .add(\n    'events',\n    () => ({\n      template: '<ui-predicate :config=\"config\" :data=\"data\" @changed=\"onChange\" @initialized=\"onInit\"></ui-predicate>',\n      data() {\n        return {\n          config: DEFAULT_CONFIG,\n          data: DATASETS.advanced,\n        };\n      },\n      methods: {\n        onChange: action('`changed` event'),\n        onInit: action('`initialized` event'),\n      },\n    }),\n    { notes: '' }\n  )\n  .add(\n    'load/dump data',\n    () => {\n      const options = {\n        simple: 'Simple',\n        advanced: 'Advanced',\n      };\n\n      const selection = select('Example', options, 'advanced');\n\n      return {\n        template: `<div class=\"columns\" style=\"display:flex;width: 80vw;height:90vh\">\n          <div style=\"flex-direction:row;width:60vw\"><ui-predicate :config=\"config\" :data=\"data\" @changed=\"onChange\" @initialized=\"onChange\"></ui-predicate></div>\n          <div style=\"flex-direction:row;width:20vw\"><textarea style=\"width:100%;height:100%\">{{ serialized }}</textarea></div>\n        </div>`,\n        data() {\n          return {\n            config: DEFAULT_CONFIG,\n            serialized: '',\n            data: DATASETS[selection],\n          };\n        },\n        methods: {\n          onChange(ctrl) {\n            this.serialized = ctrl.toJSON();\n          },\n        },\n      };\n    },\n    { notes: '' }\n  );\n",{"ui-predicate@load/dump data":{startLoc:{col:4,line:83},endLoc:{col:17,line:111}},"ui-predicate@events":{startLoc:{col:4,line:66},endLoc:{col:17,line:80}},"ui-predicate@minimal configuration":{startLoc:{col:4,line:44},endLoc:{col:5,line:63}}})).addDecorator(i.default).addDecorator(d.withKnobs).addDecorator(a.withNotes).addDecorator((0,o.default)([{name:"gray",value:"whitesmoke",default:!0},{name:"twitter",value:"#00aced"},{name:"facebook",value:"#3b5998"}])).add("minimal configuration",function(){return{template:'<ui-predicate :config="config"></ui-predicate>',data:function(){return{config:s.DEFAULT_CONFIG}}}},{notes:{markdown:"\n      ## minimal configuration\n\n      `<ui-predicate/>` only requires a `config` object.\n      That's how you will pass your `targets`,`operators` , `types` and `logicalTypes`.\n\n    "}}).add("events",function(){return{template:'<ui-predicate :config="config" :data="data" @changed="onChange" @initialized="onInit"></ui-predicate>',data:function(){return{config:s.DEFAULT_CONFIG,data:s.DATASETS.advanced}},methods:{onChange:(0,n.action)("`changed` event"),onInit:(0,n.action)("`initialized` event")}}},{notes:""}).add("load/dump data",function(){var e=(0,d.select)("Example",{simple:"Simple",advanced:"Advanced"},"advanced");return{template:'<div class="columns" style="display:flex;width: 80vw;height:90vh">\n          <div style="flex-direction:row;width:60vw"><ui-predicate :config="config" :data="data" @changed="onChange" @initialized="onChange"></ui-predicate></div>\n          <div style="flex-direction:row;width:20vw"><textarea style="width:100%;height:100%">{{ serialized }}</textarea></div>\n        </div>',data:function(){return{config:s.DEFAULT_CONFIG,serialized:"",data:s.DATASETS[e]}},methods:{onChange:function(e){this.serialized=e.toJSON()}}}},{notes:""})}).call(this,r(63)(e))},1356:function(e,t,r){var n={"./ui-predicate.stories.js":1355};function o(e){var t=i(e);return r(t)}function i(e){var t=n[e];if(!(t+1)){var r=new Error('Cannot find module "'+e+'".');throw r.code="MODULE_NOT_FOUND",r}return t}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=1356},1357:function(e){e.exports={name:"ui-predicate-vue",version:"0.3.0",description:"Finally a predicate UI component for VueJS",main:"src/index.js",scripts:{test:"echo 'not ready for prime-time';true",build:"echo 'not ready for prime-time';parcel build --out-file=ui-predicate-vue --out-dir=lib --no-cache --detailed-report --target=browser src/index.js","test:debugger":"node --inspect-brk node_modules/.bin/jest --watch","test:watch":"jest --watch --coverage=false","test:watch:coverage":"npm run --silent test:watch -- --coverage","test:coverage":"true","test:image-snapshots":"npm run docs:storybook:build && npm run test:image-snapshots:run","test:image-snapshots:run":"jest --projects=./image-snapshots",lint:"eslint --fix examples src","docs:build":"npm run --sient docs:jsdoc:build && npm run --sient docs:storybook:build && npm run --silent docs:getting-started:build","docs:jsdoc:build":"jsdoc -c ../../jsdoc.json","docs:storybook:build":"build-storybook --output-dir ../../docs/packages/$npm_package_name/$npm_package_version/examples","docs:storybook:watch":"start-storybook -p 9001","docs:getting-started:build":"parcel build --no-cache --public-url=./ --out-dir=../../docs/packages/$npm_package_name/$npm_package_version/getting-started getting-started/index.html"},author:"Francois-Guillaume Ribreau <npm@fgribreau.com> (http://fgribreau.com/)",license:"MIT",devDependencies:{"@storybook/addon-actions":"4.0.0-alpha.4","@storybook/addon-backgrounds":"4.0.0-alpha.4","@storybook/addon-centered":"4.0.0-alpha.4","@storybook/addon-jest":"4.0.0-alpha.4","@storybook/addon-knobs":"4.0.0-alpha.4","@storybook/addon-links":"4.0.0-alpha.4","@storybook/addon-notes":"4.0.0-alpha.4","@storybook/addon-options":"4.0.0-alpha.4","@storybook/addon-storyshots":"4.0.0-alpha.4","@storybook/addon-storysource":"4.0.0-alpha.4","@storybook/addon-viewport":"4.0.0-alpha.4","@storybook/addons":"4.0.0-alpha.4","@storybook/vue":"4.0.0-alpha.4","@vue/component-compiler-utils":"^1.2.1","@vue/test-utils":"^1.0.0-beta.15","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.0","babel-preset-vue":"^2.0.2","cross-env":"^5.1.4",eslint:"^4.19.1","eslint-plugin-vue":"^4.5.0","file-loader":"^1.1.11",jest:"^22.4.3","jest-serializer-vue":"^1.0.0","jest-vue-preprocessor":"^1.4.0",jsdoc:"^3.5.5","parcel-bundler":"^1.7.1",react:"^16.3.2","react-dom":"^16.3.2","svg-url-loader":"^2.3.2","ui-predicate-core":"^0.3.0","vue-jest":"^2.5.0","vue-loader":"^14.2.2","vue-template-compiler":"^2.5.16",webpack:"^4.6.0","webpack-dev-server":"^3.1.3",vue:"^2.5.16"},dependencies:{lodash:"^4.17.10"}}},1364:function(e,t,r){const{merge:n,find:o,curry:i,pipe:a,filter:d,map:s,takeLast:c,insert:u}=r(158),p=r(1363),{EventEmitter:l}=r(241);function m(e){return p.fromNullable(e[0]).value()}e.exports=function({dataclasses:e,invariants:t,errors:r,rules:g}){const{CompoundPredicate:f,ComparisonPredicate:h,Predicate:y}=e,v=(e,r)=>t.Target_idMustReferToADefinedTarget(o(e=>e.target_id===r,e)),_=(e,r)=>t.LogicalType_idMustReferToADefinedLogicalType(o(e=>e.logicalType_id===r,e)),T=(e,r)=>t.Operator_idMustReferToADefinedOperator(o(e=>e.operator_id===r,e)),b=i((e,t)=>a(d(({operator_id:e})=>t.includes(e)))(e)),P=i((e,t)=>(t.$operators=b(e.operators,t.operator_ids),t)),C=i((e,r)=>{const n=((e,t)=>p.fromNullable(o(e=>e.type_id===t,e)))(e.types,r.type_id);return t.TargetMustReferToADefinedType(n,r).then(e=>(r.$type=e,r))}),A=(e,t)=>a(e,(e=>(function(t){return t.then(t=>(e(),t))}))(t)),w=t=>{t.operators=s(e.Operator,t.operators),t.logicalTypes=s(e.LogicalType,t.logicalTypes),t.argumentTypes=s(e.ArgumentType,t.argumentTypes||[]);const r=a(e.Type,P(t));t.types=s(r,t.types);const n=a(e.Target,C(t));return Promise.all(s(n,t.targets)).then(e=>(t.targets=e,t))};function O(o){const{columns:i,data:d,options:s}=o;return new Promise((t,r)=>{try{e._requireProps(i,"operators,logicalTypes,types,targets")}catch(e){return void r(e)}t()}).then(()=>w(i)).then(e=>{let o,i;const P=new l,C=n(O.defaults.options,s);const w=a(function(){const e=!g.predicateToRemoveIsTheLastComparisonPredicate(o,f,h);f.forEach(o,t=>{t.$canBeRemoved=e&&!g.predicateToRemoveIsRootPredicate(o,t)})},function(){P.emit("changed",i)});function k(e){return t.RootPredicateMustBeACompoundPredicate(e,f).then(()=>{o=e})}function S({where:n,how:o="after",type:i}){return Promise.resolve().then(()=>t.AddOnlySupportsAfter(o)).then(()=>t.PredicateTypeMustBeValid(i,y.Types)).then(()=>C[`getDefault${i}`](e,C)).then(e=>{const t=h.is(n);if(t||f.is(n)){if(t){const t=R(n),[r,[o,i]]=c(2,t);r.predicates=u(i+1,e,r.predicates)}else n.predicates.unshift(e);return e}return Promise.reject(new r.CannotAddSomethingElseThanACompoundPredicateOrAComparisonPredicate)})}function D(e){return Promise.resolve().then(()=>t.RemovePredicateMustDifferFromRootPredicate(o,e)).then(()=>t.RemovePredicateCannotBeTheLastComparisonPredicate(o,e,f,h)).then(()=>{if(f.is(e)||h.is(e)){const t=R(e),[r,[n,o]]=c(2,t);return r.predicates.splice(o,1),0===r.predicates.length?D(r):e}return Promise.reject(new r.CannotRemoveSomethingElseThanACompoundPredicateOrAComparisonPredicate)})}function M(r,n){return t.PredicateMustBeACompoundPredicate(r,f).then(()=>_(e.logicalTypes,n)).then(e=>{r.logic=e})}function I(r,n){return t.PredicateMustBeAComparisonPredicate(r,h).then(()=>v(e.targets,n)).then(e=>(r.target=e,L(r,m(r.target.$type.$operators).operator_id)))}function L(e,r){return Promise.resolve().then(()=>t.Operator_idMustReferToADefinedOperator(e.target.$type.$operators.find(e=>e.operator_id===r))).then(t=>{e.operator=t,e.argument=null})}function j(e,t){return Promise.resolve().then(()=>{e.argument=t})}function x(t){return p.fromNullable(e.argumentTypes.find(e=>e.argumentType_id===t)).map(e=>e.component).valueOrElse(()=>C.getDefaultArgumentComponent(e,C))}function R(e){return f.reduce(o,(t,r,n)=>e===r?n:t,null)}function N(){return y.toJSON(o)}function E(e,t){P.on(e,t)}function $(e,t){P.once(e,t)}function B(e,t){e?t?P.removeListener(e,t):P.removeAllListeners(e):P.removeAllListeners()}return(d?(b=d,y.fromJSON(b,{getTargetById:t=>v(e.targets,t),getLogicalTypeById:t=>_(e.logicalTypes,t),getOperatorById:t=>T(e.operators,t)})):C.getDefaultData(e,C)).then(A(k,w)).then(()=>i={on:E,once:$,off:B,setData:A(k,w),add:A(S,w),remove:A(D,w),setPredicateTarget_id:A(I,w),setPredicateOperator_id:A(L,w),setPredicateLogicalType_id:A(M,w),setArgumentValue:A(j,w),getArgumentTypeComponentById:x,toJSON:N,get root(){return o},get columns(){return e},get options(){return C}})});var b}return O.defaults={options:{getDefaultData:(e,t)=>t.getDefaultComparisonPredicate(e,t).then(r=>t.getDefaultCompoundPredicate(e,t,[r])),getDefaultCompoundPredicate:(e,t,r)=>(Array.isArray(r)&&0!==r.length?Promise.resolve(r):t.getDefaultComparisonPredicate(e,t).then(e=>[e])).then(r=>t.getDefaultLogicalType(r,e,t).then(e=>f(e,r))),getDefaultComparisonPredicate(e,t){const r=m(e.targets);return h(r,m(r.$type.$operators))},getDefaultLogicalType:(e,t,r)=>Promise.resolve(m(t.logicalTypes)),getDefaultArgumentComponent(e,t){throw new r.UIFrameworkMustImplementgetDefaultArgumentComponent("UIFrameworkMustImplementgetDefaultArgumentComponent")}}},O}},1365:function(e,t,r){const{merge:n,mergeAll:o}=r(158),i=r(728);e.exports=(({invariants:e,errors:t})=>{const{Target:a,Operator:d,LogicalType:s}=r(729);function c(t){return e.PredicateTypeMustBeValid(t.$name,c.Types).then(()=>n(i(t.$name),{$canBeRemoved:!0}))}function u(e,t,r=null){return c(u).then(o=>n(o,{target:e,operator:t,argument:r}))}function p(t,r){return e.CompoundPredicateMustHaveAtLeastOneSubPredicate(r,p).then(()=>c(p)).then(e=>n(e,{logic:t,predicates:r}))}return c.toJSON=function(e){return u.is(e)?u.toJSON(e):p.toJSON(e)},c.fromJSON=function(e,r){return u.isFromJSON(e)?u.fromJSON(e,r):p.isFromJSON(e)?p.fromJSON(e,r):Promise.reject(new t.UnknownJSONData)},c.Types={ComparisonPredicate:"ComparisonPredicate",CompoundPredicate:"CompoundPredicate"},u.$name=c.Types.ComparisonPredicate,u.toJSON=function(e){return o([a.toJSON(e.target),d.toJSON(e.operator),{argument:e.argument}])},u.fromJSON=function(e,t){return Promise.all([t.getTargetById(e.target_id),t.getOperatorById(e.operator_id)]).then(([t,r])=>u(t,r,e.argument))},u.is=(e=>e&&e.$_type===c.Types.ComparisonPredicate),u.isFromJSON=(e=>e&&e.target_id),p.$name=c.Types.CompoundPredicate,p.toJSON=function(e){return o([s.toJSON(e.logic),{predicates:e.predicates.map(c.toJSON)}])},p.fromJSON=function(t,r){return e.CompoundPredicateMustHaveAtLeastOneSubPredicate(t.predicates,p).then(()=>r.getLogicalTypeById(t.logicalType_id)).then(e=>Promise.all(t.predicates.map(e=>c.fromJSON(e,r))).then(t=>p(e,t)))},p.reduce=function(e,t,r,n=[]){const o=t(r,e,n);return e.predicates.reduce((r,o,i)=>{const a=n.concat([e,[o,i]]);return p.is(o)?p.reduce(o,t,r,a):t(r,o,a)},o)},p.forEach=((e,t)=>{p.reduce(e,(e,r)=>{t(r)},null)}),p.is=(e=>e&&e.$_type===c.Types.CompoundPredicate),p.isFromJSON=(e=>e&&e.logicalType_id),{Predicate:c,ComparisonPredicate:u,CompoundPredicate:p}})},1366:function(e,t,r){const{merge:n}=r(158);e.exports=(e=>n(r(729),r(1365)(e)))},1367:function(e,t){e.exports=(({errors:e,rules:t})=>({CompoundPredicateMustHaveAtLeastOneSubPredicate:t=>Array.isArray(t)&&0!==t.length?Promise.resolve():Promise.reject(new e.CompoundPredicateMustHaveAtLeastOneSubPredicate),PredicateTypeMustBeValid:(t,r)=>Object.keys(r).includes(t)?Promise.resolve():Promise.reject(new e.InvalidPredicateType),RootPredicateMustBeACompoundPredicate:(t,r)=>r.is(t)?Promise.resolve(t):Promise.reject(new e.RootPredicateMustBeACompoundPredicate),PredicateMustBeAComparisonPredicate:(t,r)=>r.is(t)?Promise.resolve():Promise.reject(new e.PredicateMustBeAComparisonPredicate),PredicateMustBeACompoundPredicate:(t,r)=>r.is(t)?Promise.resolve():Promise.reject(new e.PredicateMustBeACompoundPredicate),AddOnlySupportsAfter:t=>"after"!==t?Promise.reject(new e.AddCurrentlyOnlySupportAfterInsertion):Promise.resolve(),TargetMustReferToADefinedType:(t,r)=>t.isNone()?Promise.reject(new e.TargetMustReferToADefinedType(`target ${JSON.stringify(r.target_id)} does not refer to a defined type, target.type_id=${JSON.stringify(r.type_id)}`)):Promise.resolve(t.value()),LogicalType_idMustReferToADefinedLogicalType:t=>t?Promise.resolve(t):Promise.reject(new e.LogicalType_idMustReferToADefinedLogicalType),Target_idMustReferToADefinedTarget:t=>t?Promise.resolve(t):Promise.reject(new e.Target_idMustReferToADefinedTarget),Operator_idMustReferToADefinedOperator:t=>t?Promise.resolve(t):Promise.reject(new e.Operator_idMustReferToADefinedOperator),RemovePredicateMustDifferFromRootPredicate:(r,n)=>t.predicateToRemoveIsRootPredicate(r,n)?Promise.reject(new e.ForbiddenCannotRemoveRootCompoundPredicate):Promise.resolve(n),RemovePredicateCannotBeTheLastComparisonPredicate:(r,n,o,i)=>i.is(n)&&t.predicateToRemoveIsTheLastComparisonPredicate(r,o,i)?Promise.reject(new e.ForbiddenCannotRemoveLastComparisonPredicate):Promise.resolve()}))},1368:function(e,t){e.exports={predicateToRemoveIsRootPredicate:(e,t)=>e===t,predicateToRemoveIsTheLastComparisonPredicate:(e,t,r)=>{return 1===t.reduce(e,(e,t)=>r.is(t)?e+1:e,0)}}},1374:function(e,t,r){const{mergeAll:n}=r(158),o=r(1373);function i(e){return{[e]:o(e)}}e.exports=n([i("InvalidPredicateType"),i("UnknownJSONData"),i("CompoundPredicateMustHaveAtLeastOneSubPredicate"),i("RootPredicateMustBeACompoundPredicate"),i("PredicateMustBeACompoundPredicate"),i("PredicateMustBeAComparisonPredicate"),i("AddCurrentlyOnlySupportAfterInsertion"),i("TargetMustReferToADefinedType"),i("LogicalType_idMustReferToADefinedLogicalType"),i("Target_idMustReferToADefinedTarget"),i("Operator_idMustReferToADefinedOperator"),i("Operator_idMustReferToADefinedOperator"),i("ForbiddenCannotRemoveRootCompoundPredicate"),i("ForbiddenCannotRemoveLastComparisonPredicate"),i("CannotRemoveSomethingElseThanACompoundPredicateOrAComparisonPredicate"),i("CannotAddSomethingElseThanACompoundPredicateOrAComparisonPredicate"),i("UIFrameworkMustImplementgetDefaultArgumentComponent")])},1375:function(e,t,r){const n=r(1374),o=r(1368),i=r(1367)({errors:n,rules:o}),a=r(1366)({invariants:i,errors:n}),d=r(1364)({dataclasses:a,invariants:i,errors:n,rules:o});e.exports={PredicateCore:d,errors:n,invariants:i,dataclasses:a}},1376:function(e,t,r){"use strict";var n,o=r(1375),i=r(176),a=(n=i)&&n.__esModule?n:{default:n};var d=r(1362),s={options:{getDefaultArgumentComponent:function(e,t){return a.default.component("default-argument-component",{methods:{_onChange:function(e){var t=e.target.value;this.$emit("change",t)}},props:{value:{type:null,required:!0}},template:'<div><input type="text" @change="_onChange" :value="value"></div>'})}}};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.columns,n=e.options,i=d(s.options,n);return(0,o.PredicateCore)({data:t,columns:r,options:i})}c.defaults=s,e.exports={UIPredicateCoreVue:c}},1378:function(e,t,r){(e.exports=r(1377)(!1)).push([e.i,".ui-predicate.main{display:flex}.ui-predicate--row{flex-direction:row}.ui-predicate--col{display:inline-block}",""])},1379:function(e,t,r){var n=r(1378);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r(738).default)("dbc4eb24",n,!0,{})},1380:function(e,t,r){"use strict";r.r(t);var n=r(245),o=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var a=r(514),d=r(101);var s=function(e){r(1379)},c=Object(d.a)(o.a,a.a,a.b,!1,s,null,null);t.default=c.exports},1381:function(e,t,r){"use strict";r.r(t);var n=r(246),o=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var a=r(515),d=r(101),s=Object(d.a)(o.a,a.a,a.b,!1,null,null,null);t.default=s.exports},1382:function(e,t,r){"use strict";var n,o=r(176),i=(n=o)&&n.__esModule?n:{default:n};e.exports=i.default.component("ui-predicate-comparison-argument",{render:function(e){return e(this.getArgumentTypeComponentById(this.predicate.operator.argumentType_id),{props:{value:this.predicate.argument,predicate:this.predicate},on:{change:this._setArgumentValue}})},inject:["getArgumentTypeComponentById","setArgumentValue"],methods:{_setArgumentValue:function(e){this.setArgumentValue(this.predicate,e)}},props:{predicate:{type:Object,required:!0}}})},1383:function(e,t,r){"use strict";r.r(t);var n=r(247),o=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var a=r(516),d=r(101),s=Object(d.a)(o.a,a.a,a.b,!1,null,null,null);t.default=s.exports},1384:function(e,t,r){"use strict";r.r(t);var n=r(248),o=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var a=r(517),d=r(101),s=Object(d.a)(o.a,a.a,a.b,!1,null,null,null);t.default=s.exports},1385:function(e,t,r){"use strict";var n=r(1384),o=r(1383),i=r(1382),a=r(1381),d=r(1380),s={"ui-predicate-options":n,"ui-predicate-comparison":o,"ui-predicate-comparison-argument":i,"ui-predicate-compound":a,"ui-predicate":d},c=function(e){Object.keys(s).forEach(function(t){e.component(t,s[t].default||s[t])})};"undefined"!=typeof window&&window.Vue&&(c(window.Vue),window.UIPredicate=d),e.exports={version:r(1357).version,install:c,components:s,UIPredicateOptions:n,UIPredicateComparison:o,UIPredicateComparisonArgument:i,UIPredicateCompound:a,UIPredicate:d},e.exports.default=e.exports},1398:function(e,t,r){"use strict";(function(e){var t=r(735),n=r(1387),o=a(r(176)),i=a(r(1385));function a(e){return e&&e.__esModule?e:{default:e}}o.default.use(i.default),(0,n.setOptions)({hierarchyRootSeparator:/\|/}),(0,t.configure)(function(){var e=r(1356);e.keys().forEach(function(t){return e(t)})},e)}).call(this,r(63)(e))},1400:function(e,t,r){r(513),r(1399),e.exports=r(1398)},245:function(e,t,r){"use strict";var n=r(1376);e.exports={name:"ui-predicate",props:{config:{type:Object,required:!0},data:{type:Object,required:!1}},data:function(){return{root:{},columns:{},isInAddCompoundMode:!1}},provide:function(){var e=this;return{getAddCompoundMode:function(){return e.isInAddCompoundMode},add:function(t){return e.ctrl.add({where:t,how:"after",type:e.isInAddCompoundMode?"CompoundPredicate":"ComparisonPredicate"})},remove:function(t){return e.ctrl.remove(t)},setPredicateLogicalType_id:function(t,r){return e.ctrl.setPredicateLogicalType_id(t,r)},setPredicateTarget_id:function(t,r){return e.ctrl.setPredicateTarget_id(t,r)},setPredicateOperator_id:function(t,r){return e.ctrl.setPredicateOperator_id(t,r)},getArgumentTypeComponentById:function(t){return e.ctrl.getArgumentTypeComponentById(t)},setArgumentValue:function(t,r){return e.ctrl.setArgumentValue(t,r)}}},methods:{setIsInAddCompoundMode:function(e){this.isInAddCompoundMode=e,this.$root.$emit("isInAddCompoundMode",e)},onAltPressed:function(e){18==e.keyCode&&this.setIsInAddCompoundMode(!0)},onAltReleased:function(e){18==e.keyCode&&this.setIsInAddCompoundMode(!1)},triggerChanged:function(){this.$emit("changed",this.ctrl)}},mounted:function(){var e=this;(0,n.UIPredicateCoreVue)({data:this.data,columns:this.config}).then(function(t){e.ctrl=t,e.root=t.root,e.columns=t.columns,e.$emit("initialized",t),t.on("changed",e.triggerChanged)},function(e){console.error(e)}),window.addEventListener("keyup",this.onAltReleased),window.addEventListener("keydown",this.onAltPressed)},destroyed:function(){this.ctrl&&this.ctrl.off(),window.removeEventListener("keyup",this.onAltReleased),window.removeEventListener("keydown",this.onAltPressed)}}},246:function(e,t,r){"use strict";e.exports={name:"ui-predicate-compound",props:{compound:{type:Object,required:!0},columns:{type:Object,required:!0}},inject:["add","setPredicateLogicalType_id"],methods:{changeLogic:function(e){var t=e.target.value;this.setPredicateLogicalType_id(this.compound,t)}}}},247:function(e,t,r){"use strict";e.exports={name:"ui-predicate-comparison",props:{predicate:{type:Object,required:!0},columns:{type:Object,required:!0}},inject:["add","setPredicateTarget_id","setPredicateOperator_id"],methods:{changeTarget:function(e){var t=e.target.value;this.setPredicateTarget_id(this.predicate,t)},changeOperator:function(e){var t=e.target.value;this.setPredicateOperator_id(this.predicate,t)}},mounted:function(){window.addEventListener("keyup",this.onAltReleased),window.addEventListener("keydown",this.onAltPressed)},destroyed:function(){window.removeEventListener("keyup",this.onAltReleased),window.removeEventListener("keydown",this.onAltPressed)}}},248:function(e,t,r){"use strict";e.exports={name:"ui-predicate-options",props:{predicate:{type:Object,required:!0}},data:function(){return{isInAddCompoundMode:this.getAddCompoundMode()}},inject:["remove","add","getAddCompoundMode"],methods:{isInAddCompoundModeChanged:function(e){this.isInAddCompoundMode=e}},mounted:function(){this.$root.$on("isInAddCompoundMode",this.isInAddCompoundModeChanged)},destroyed:function(){this.$root.$off("isInAddCompoundMode",this.isInAddCompoundModeChanged)}}},514:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{},[t("div",{staticClass:"ui-predicate main"},[t("ui-predicate-compound",{attrs:{compound:this.root,columns:this.columns}})],1)])},o=[]},515:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-predicate ui-predicate--row compound"},[r("div",{staticClass:"ui-predicate ui-predicate--row"},[r("div",{staticClass:"ui-predicate--col"},[e.compound.logic?r("select",{domProps:{value:e.compound.logic.logicalType_id},on:{change:e.changeLogic}},e._l(e.columns.logicalTypes,function(t){return r("option",{domProps:{value:t.logicalType_id}},[e._v(e._s(t.label))])})):e._e()]),e._v(" "),r("ui-predicate-options",{attrs:{predicate:e.compound}})],1),e._v(" "),r("div",{staticClass:"ui-predicate predicates ui-predicate--row"},e._l(e.compound.predicates,function(t,n){return r("div",{staticClass:"ui-predicate predicate"},["CompoundPredicate"===t.$_type?r("ui-predicate-compound",{attrs:{compound:t,columns:e.columns}}):e._e(),e._v(" "),"ComparisonPredicate"===t.$_type?r("ui-predicate-comparison",{attrs:{predicate:t,columns:e.columns}}):e._e()],1)}))])},o=[]},516:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-predicate--row comparison"},[r("div",{staticClass:"ui-predicate--col"},[r("select",{domProps:{value:e.predicate.target.target_id},on:{change:e.changeTarget}},e._l(e.columns.targets,function(t){return r("option",{domProps:{value:t.target_id}},[e._v(e._s(t.label))])}))]),e._v(" "),r("div",{staticClass:"ui-predicate--col"},[r("select",{domProps:{value:e.predicate.operator.operator_id},on:{change:e.changeOperator}},e._l(e.predicate.target.$type.$operators,function(t){return r("option",{domProps:{value:t.operator_id}},[e._v(e._s(t.label))])}))]),e._v(" "),r("div",{staticClass:"ui-predicate--col"},[r("ui-predicate-comparison-argument",{attrs:{predicate:e.predicate}})],1),e._v(" "),r("ui-predicate-options",{attrs:{predicate:e.predicate}})],1)},o=[]},517:function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-predicate--col ui-predicate--option"},[r("button",{attrs:{type:"button",disabled:!1===e.predicate.$canBeRemoved},on:{click:function(t){e.remove(e.predicate)}}},[e._v("-")]),e._v(" "),r("button",{attrs:{type:"button"},on:{click:function(t){e.add(e.predicate)}}},[e._v(e._s(e.isInAddCompoundMode?"…":"+"))])])},o=[]},728:function(e,t){e.exports=function(e){return{$_type:e}}},729:function(e,t,r){const{mergeAll:n,trim:o}=r(158),i=r(728);function a(e){const{target_id:t,label:r,type_id:o}=u(e,"target_id,label,type_id");return n([i("Target"),{target_id:t,label:r,type_id:o},e])}function d(e){const{operator_id:t,label:r,argumentType_id:o}=u(e,"operator_id,label,argumentType_id");return n([i("Operator"),{operator_id:t,argumentType_id:o,label:r},e])}function s(e){const{logicalType_id:t,label:r}=u(e,"logicalType_id,label");return n([i("LogicalType"),{logicalType_id:t,label:r},e])}a.toJSON=function(e){return{target_id:e.target_id}},d.toJSON=function(e){return{operator_id:e.operator_id}},s.toJSON=function(e){return{logicalType_id:e.logicalType_id}};const c=Object.prototype.toString;function u(e,t){if(r=e,"[object Object]"!==c.call(r))throw new Error(`Object is required, got: ${JSON.stringify(e)}.`);var r;const n=t.split(",").map(o);let i;for(;i=n.pop();)if(!e.hasOwnProperty(i))throw new Error(`Object ${JSON.stringify(e)} MUST have a '${i}' property.`);return e}e.exports={Type:function(e){const{type_id:t,operator_ids:r}=u(e,"type_id,operator_ids");return n([i("Type"),{type_id:t,operator_ids:r},e])},Target:a,Operator:d,LogicalType:s,ArgumentType:function(e){const{argumentType_id:t,component:r}=u(e,"argumentType_id,component");return n([i("ArgumentType"),{argumentType_id:t,component:r},e])},_requireProps:u}}},[[1400,1,2]]]);
//# sourceMappingURL=preview.88f4fcf0df78816aa28b.bundle.js.map